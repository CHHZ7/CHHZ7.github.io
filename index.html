<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>灰原什么的最可爱了(●'◡'●)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            overflow: hidden;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            font-family: "微软雅黑", "PingFang SC", sans-serif;
            height: 100vh;
            position: relative;
            cursor: default;
            transition: background 0.5s ease;
        }
        
        .title {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #ecf0f1;
            font-size: 2rem;
            text-align: center;
            z-index: 100;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            background: rgba(44, 62, 80, 0.7);
            padding: 10px 20px;
            border-radius: 50px;
            backdrop-filter: blur(4px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .title:hover {
            transform: translateX(-50%) scale(1.05);
        }
        
        .sticker {
            position: absolute;
            padding: 10px 16px;
            border-radius: 8px;
            color: white;
            font-family: "微软雅黑", "PingFang SC", sans-serif;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            white-space: nowrap;
            cursor: pointer;
            user-select: none;
            transition: transform 0.3s ease, box-shadow 0.3s ease, opacity 0.5s ease;
            z-index: 1;
            font-weight: 500;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }
        
        .sticker:hover {
            transform: scale(1.08);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
            z-index: 2;
        }
        
        @keyframes float {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            25% {
                transform: translateY(-15px) rotate(1deg);
            }
            50% {
                transform: translateY(-5px) rotate(-1deg);
            }
            75% {
                transform: translateY(-10px) rotate(2deg);
            }
        }
        
        .heart {
            position: absolute;
            width: 20px;
            height: 20px;
            background: rgba(255, 99, 132, 0.7);
            transform: rotate(45deg);
            z-index: 0;
            pointer-events: none;
        }
        
        .heart:before, .heart:after {
            content: '';
            width: 20px;
            height: 20px;
            background: rgba(255, 99, 132, 0.7);
            border-radius: 50%;
            position: absolute;
        }
        
        .heart:before {
            top: -10px;
            left: 0;
        }
        
        .heart:after {
            top: 0;
            left: -10px;
        }
        
        @keyframes heartFloat {
            0% {
                transform: rotate(45deg) translateY(0) scale(1);
                opacity: 1;
            }
            100% {
                transform: rotate(45deg) translateY(-100px) scale(0.5);
                opacity: 0;
            }
        }
        
        .info-panel {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(44, 62, 80, 0.7);
            padding: 10px 15px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            font-size: 0.9rem;
            color: #ecf0f1;
            z-index: 100;
            backdrop-filter: blur(4px);
        }
        
        .controls {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 100;
        }
        
        .control-btn {
            background: rgba(44, 62, 80, 0.7);
            padding: 8px 15px;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            font-size: 0.9rem;
            color: #ecf0f1;
            backdrop-filter: blur(4px);
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-family: inherit;
        }
        
        .control-btn:hover {
            background: rgba(52, 73, 94, 0.9);
            transform: scale(1.05);
        }
        
        .particle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
            z-index: 0;
        }
        
        .settings-panel {
            position: absolute;
            top: 80px;
            right: 20px;
            background: rgba(44, 62, 80, 0.8);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            color: #ecf0f1;
            z-index: 100;
            backdrop-filter: blur(4px);
            width: 200px;
            display: none;
        }
        
        .settings-panel h3 {
            margin-bottom: 10px;
            font-size: 1rem;
        }
        
        .setting-item {
            margin-bottom: 10px;
        }
        
        .setting-item label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.8rem;
        }
        
        .setting-item input[type="range"] {
            width: 100%;
        }
        
        .theme-toggle {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(44, 62, 80, 0.7);
            padding: 8px 15px;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            font-size: 0.9rem;
            color: #ecf0f1;
            z-index: 100;
            backdrop-filter: blur(4px);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .theme-toggle:hover {
            background: rgba(52, 73, 94, 0.9);
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="title">灰原什么的最可爱了(●'◡'●)</div>
    <div class="theme-toggle">日间模式</div>
    
    <div class="controls">
        <button class="control-btn" id="addBtn">添加标签</button>
        <button class="control-btn" id="clearBtn">清除标签</button>
        <button class="control-btn" id="settingsBtn">设置</button>
    </div>
    
    <div class="settings-panel" id="settingsPanel">
        <h3>设置</h3>
        <div class="setting-item">
            <label for="stickerCount">标签数量: <span id="countValue">15</span></label>
            <input type="range" id="stickerCount" min="5" max="30" value="15">
        </div>
        <div class="setting-item">
            <label for="animationSpeed">动画速度: <span id="speedValue">正常</span></label>
            <input type="range" id="animationSpeed" min="1" max="5" value="3">
        </div>
        <div class="setting-item">
            <label for="fontSize">字体大小: <span id="sizeValue">中等</span></label>
            <input type="range" id="fontSize" min="1" max="5" value="3">
        </div>
        <div class="setting-item">
            <label>
                <input type="checkbox" id="enableParticles" checked> 启用粒子效果
            </label>
        </div>
        <div class="setting-item">
            <label>
                <input type="checkbox" id="enableHearts" checked> 启用心形动画
            </label>
        </div>
    </div>
    
    <div class="info-panel">标签数量: <span id="count">0</span></div>

    <script>
        // 定义100条温暖的文字内容（已移除名人名字）
        const texts = [
            "你值得这世间，所有的美好。",
            "心若有所向往，何惧道阻且长。",
            "命运不会亏待正在努力变好的你",
            "愿你成为自己的太阳，无需借助谁的光。",
            "凭时间赢来的东西，时间肯定会为之作证。",
            "错过了落日余晖，还可以静待满天繁星。",
            "努力去做一个温暖的人，用真心对世界微笑，用眼泪提醒自己要做的更好，用快乐去迎接每一天的阳光，用自信向世界宣称你过得很好。",
            "不要沉醉于过去，不要遐想于未来，专注于即将流逝的现在。",
            "你永远没有资格去看不起一个正在努力的人。",
            "身后还有那么多期许的目光，你怎么可以轻易放弃。",
            "每天提醒自己，你有多自律，就有多美好。只要你还愿意努力，生活会不断给你惊喜！",
            "请再努力一下，为了你想见的人，想做的事，想成为的自己",
            "把努力当成一种习惯，而不是三分钟热度。坚持才是王道，每一个你羡慕的收获，都是别人努力用心拼来的，你可以报怨，也可以无视，但记住，不努力，连认输的资格都没有！",
            "捂住你的耳朵，专注于而前的事，不要受干扰，不要想结果。",
            "就算步子很小，也要一步步前进。",
            "陪你到最后的那个人，只有你自己，你就是自己的神。",
            "要好好珍惜自己的名字：记得自己是谁，便知道自己要做什么，要走什么样的路。",
            "过往不恋，未来不迎，当下不负。",
            "你期待的，正在向你走来​。",
            "努力追上那个曾经被赋予厚望的自己",
            "迷茫时，坚定地对自己说，当时的梦想，我还记得",
            "如果你累了，学会休息，而不是放弃。",
            "坐看庭前花开花落，笑看天边云卷云舒。",
            "发光不是太阳的权利，每个人都可以。",
            "无论这个世界对你怎样，都请你一如既往的努力、勇敢、充满希望。",
            "即使生活有一千个理由让你哭，你也要找到一个理由让自己笑，这就是人生。",
            "想要无可取代，就必须时刻与众不同。",
            "你干嘛在乎别人怎么想？",
            "当你能一个人默默消化掉负面情绪的时候，你就真的长大了",
            "失落时悄悄伸出手和风击个掌。",
            "心中的微光，是梦想出发的地方。",
            "糟糕的日子往往有特别的价值 但前提是你要挺过去 你要让所有的糟糕都变得值得",
            "生活不是等着暴风雨过去，而是学会在风雨中跳舞。",
            "当你觉得什么都没意思的时候你就学习，学起习来身边的任何东西都变得有趣了。",
            "星光不问赶路人，时光不负有心人。",
            "真正在努力的，日子是不会舒服的。把自己变优秀，其他的事情自然就会跟着好起来，会讲究，能将就，能享受最好的，也能承受最坏的。",
            "老师说过，人生总是得有几年的沉淀时间。那段日子，你会很孤独，很落魄，很狼狈，但这段的经历，会影响你未来几十年的人生。与君共勉。",
            "等熬过这些日子，一切都会变好的。",
            "努力过后，才知道许多事情，坚持坚持，就过来了",
            "你敷衍生活，生活就会敷衍你",
            "人生最精彩的不是成功的那一瞬间，而是回头看，那段漆黑看似没有尽头、苦苦摸索的过程。",
            "黑夜无论怎样悠长，白昼总会到来！昨天终将过去，明日灿烂依然！",
            "人间一趟，积极向上，不念过往，不畏将来",
            "与其在别人伞下将就，不如自己在雨里奔跑。",
            "向日葵告诉我，只要面对着阳光努力向上，日子就会变得单纯而美好。",
            "如今我努力奔跑，不过是为了追上那个曾经被寄予厚望的自己。",
            "接受自己的普通，也要记得发现自己的美。",
            "在这样的时刻，我们需要耐心等待，满怀信心地去期待，相信，生活不会放弃你，命运不会抛弃你。如果你耐不住寂寞，就看不到繁华。",
            "阻碍你的，是恐惧和优柔寡断，你得相信自己，往前走吧。",
            "一旦你从心里接纳了自己的弱点，就再也没有人可以用这个事情伤害你。",
            "人生的旅途中，你总有那么一段时间，需要自己走，需要自己扛。不要感觉害怕，不要感觉孤单，这只不过是成长的代价罢了。",
            "真正治愈自己的，只有自己；不去抱怨，尽量担待；不怕孤单，努力沉淀。",
            "我经历了失败、失败再失败，但这就是我成功的原因。",
            "当你足够努力时，幸运总会和你不期而遇。",
            "这一路你可以哭，但是你一定不能停。",
            "不要尝试做你喜欢的事，要去喜欢你正在做的事。",
            "生活在阴沟里，也要记得仰望星空",
            "你未必光芒万丈，但始终温暖有光。",
            "因为有梦，所以勇敢出发，选择出发，便只顾风雨兼程。",
            "今日披星戴月，明朝轻舞飞扬。",
            "谁不是一边受挫折，一边学坚强。",
            "你所热爱的 就是你的生活",
            "人生，总有些黑暗的隧道需要自己穿越。",
            "当生活压得你喘不过来气的时候，一定要学会自己为自己鼓掌。",
            "做自己喜欢做的事情，做自己擅长的事情，找回成功的喜悦，找回失去的信心，找到前进动力和方向。",
            "很多事情就像是旅行一样，当你决定要出发的时候，最困难的那部分其实就已经完成了",
            "心小了，所有的小事就大了；心大了，所有的大事都小了；看淡世事沧桑，内心安然无恙。",
            "在多说无益的时候，也许沉默就是最好的解释。",
            "我能接受失败，但我不能接受放弃",
            "当你有一种坚韧不拔的精神，当你为了一个目标愿意慢慢去努力，用时间争取自己的未来，往往最后能取得的成就比那些跑得快的人还要多。",
            "淡然，是人生的一种成长。别让生活的压力挤走快乐，收拾情绪，重新上路。",
            "累了，蹲下来抱抱自己，依旧倔强的说：也不过如此。",
            "即使身处暗流，也要仰望星空啊",
            "只有先爱自己，世界才会爱你。",
            "用快乐带动心情，用观念导航人生，用执着追求事业，用真诚对待朋友，用平淡对待磨难，用努力追求幸福，用感恩对待生活！",
            "每个人都是自己的英雄。",
            "因为有悔，所以披星戴月；因为有梦，所以奋不顾身。",
            "他未必光芒万丈，但始终温暖有光！",
            "你的存在本身就是一件很美好的事。",
            "我看到前方黑暗的尽头，有光在等着我。",
            "即使深陷沟渠，也要仰望星空。",
            "世界很大、风景很美、机会很多、人生很短，不要蜷缩在一小块阴影里。",
            "虽则人世充满了痛苦，但也充满克服痛苦的办法。",
            "保持乐观积极的情绪，逆着阳光，一路向前!",
            "在以后的日子里，你还会遇到很多类似的事，但不管怎样，不要让暗影吞噬你的心。",
            "你生来就值得被爱，这一点你无需质疑",
            "凡自强不息者，终将得到救赎。",
            "含泪播种的人一定能含笑收获。",
            "黑暗的夜才会看见最美的星光，人生亦是如此。",
            "就算世界有一千个理由让你哭泣，你也要有一千零一个理由微笑。",
            "那些努力微笑的人，也曾在深夜里痛哭。",
            "每一次星夜兼程，都是活下去的赞歌",
            "如果事与愿违，就相信上帝一定另有安排。",
            "请保持那份热爱，奔赴下一场山海。",
            "信仰是一种很神圣的寄托。",
            "得到就珍惜，失去不后悔，不要为难自己，不要苛求别人，如果尽力而为，那就问心无愧，无怨无悔。",
            "人生难免经受挫折，风雨过后就是彩虹；生活难免遭受苦难，雨过天晴终有阳光。",
            "希望你眼眸有星辰，心中有山海，从此以梦为马，不负韶华。",
            "一切都会过去的，活在此刻！",
            "你应该被爱，也值得被爱。"
        ];

        // 定义多种颜色
        const colors = [
            "rgba(255, 99, 132, 0.85)",
            "rgba(54, 162, 235, 0.85)",
            "rgba(255, 206, 86, 0.85)",
            "rgba(75, 192, 192, 0.85)",
            "rgba(153, 102, 255, 0.85)",
            "rgba(255, 159, 64, 0.85)",
            "rgba(199, 199, 199, 0.85)",
            "rgba(83, 102, 255, 0.85)",
            "rgba(40, 159, 64, 0.85)"
        ];

        // 记录当前标签数量
        let stickerCount = 0;
        
        // 记录所有标签的位置和大小
        const stickerPositions = [];
        
        // 默认夜间模式
        let isNightMode = true;
        
        // 粒子效果
        let particles = [];
        let particleInterval;
        
        // 设置
        let settings = {
            stickerCount: 15,
            animationSpeed: 3,
            fontSize: 3,
            enableParticles: true,
            enableHearts: true
        };

        // 生成随机数的函数
        function getRandom(min, max) {
            return Math.random() * (max - min) + min;
        }

        // 检查位置是否与现有标签重叠
        function isOverlapping(x, y, width, height) {
            for (const pos of stickerPositions) {
                const dx = Math.abs(x - pos.x);
                const dy = Math.abs(y - pos.y);
                
                // 如果两个标签中心点的距离小于它们的宽度和高度之和的一半，则认为重叠
                if (dx < (width + pos.width) / 2 + 10 && dy < (height + pos.height) / 2 + 10) {
                    return true;
                }
            }
            return false;
        }

        // 生成文字标签
        function createSticker() {
            const sticker = document.createElement("div");
            sticker.className = "sticker";
            
            // 随机选择文字和颜色
            const text = texts[Math.floor(Math.random() * texts.length)];
            const color = colors[Math.floor(Math.random() * colors.length)];
            
            sticker.textContent = text;
            sticker.style.backgroundColor = color;
            
            // 根据设置调整字体大小
            let fontSize;
            switch(settings.fontSize) {
                case 1: fontSize = getRandom(12, 16); break;
                case 2: fontSize = getRandom(14, 18); break;
                case 3: fontSize = getRandom(16, 22); break;
                case 4: fontSize = getRandom(18, 24); break;
                case 5: fontSize = getRandom(20, 26); break;
                default: fontSize = getRandom(16, 22);
            }
            sticker.style.fontSize = `${fontSize}px`;
            
            // 先添加到DOM以获取实际尺寸
            document.body.appendChild(sticker);
            const width = sticker.offsetWidth;
            const height = sticker.offsetHeight;
            
            // 寻找不重叠的位置
            let x, y;
            let attempts = 0;
            const maxAttempts = 50;
            
            do {
                x = getRandom(5, 85);
                y = getRandom(15, 85);
                attempts++;
            } while (isOverlapping(x, y, width, height) && attempts < maxAttempts);
            
            // 如果尝试次数过多，直接移除并返回
            if (attempts >= maxAttempts) {
                document.body.removeChild(sticker);
                return;
            }
            
            // 设置位置
            sticker.style.left = `${x}%`;
            sticker.style.top = `${y}%`;
            
            // 记录位置和尺寸
            stickerPositions.push({
                x: x,
                y: y,
                width: width,
                height: height,
                element: sticker
            });
            
            // 根据设置调整动画速度
            let animationDuration;
            switch(settings.animationSpeed) {
                case 1: animationDuration = getRandom(12, 18); break;
                case 2: animationDuration = getRandom(10, 16); break;
                case 3: animationDuration = getRandom(8, 14); break;
                case 4: animationDuration = getRandom(6, 12); break;
                case 5: animationDuration = getRandom(4, 10); break;
                default: animationDuration = getRandom(8, 14);
            }
            
            sticker.style.animation = `float ${animationDuration}s infinite ease-in-out`;
            sticker.style.animationDelay = `${getRandom(0, 5)}s`;
            
            // 更新计数
            stickerCount++;
            document.getElementById('count').textContent = stickerCount;
            
            // 添加点击移除功能
            sticker.addEventListener('click', function() {
                this.style.transform = 'scale(0)';
                this.style.opacity = '0';
                
                // 从位置数组中移除
                const index = stickerPositions.findIndex(pos => pos.element === this);
                if (index !== -1) {
                    stickerPositions.splice(index, 1);
                }
                
                setTimeout(() => {
                    if (this.parentNode) {
                        this.parentNode.removeChild(this);
                        stickerCount--;
                        document.getElementById('count').textContent = stickerCount;
                    }
                }, 500);
            });
            
            // 添加右键菜单功能
            if (settings.enableHearts) {
                sticker.addEventListener('contextmenu', function(e) {
                    e.preventDefault();
                    createHeart(e.clientX, e.clientY);
                    return false;
                });
            }
            
            // 一段时间后自动移除并重新生成，保持动态
            setTimeout(() => {
                if (sticker.parentNode) {
                    sticker.style.opacity = '0';
                    
                    // 从位置数组中移除
                    const index = stickerPositions.findIndex(pos => pos.element === sticker);
                    if (index !== -1) {
                        stickerPositions.splice(index, 1);
                    }
                    
                    setTimeout(() => {
                        if (sticker.parentNode) {
                            sticker.parentNode.removeChild(sticker);
                            stickerCount--;
                            document.getElementById('count').textContent = stickerCount;
                            createSticker();
                        }
                    }, 500);
                }
            }, getRandom(15000, 25000));
        }

        // 创建爱心效果
        function createHeart(x, y) {
            if (!settings.enableHearts) return;
            
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.style.left = `${x - 10}px`;
            heart.style.top = `${y - 10}px`;
            heart.style.animation = `heartFloat 1s forwards`;
            
            document.body.appendChild(heart);
            
            setTimeout(() => {
                if (heart.parentNode) {
                    heart.parentNode.removeChild(heart);
                }
            }, 1000);
        }

        // 切换主题模式
        function toggleTheme() {
            isNightMode = !isNightMode;
            
            if (isNightMode) {
                document.body.style.background = 'linear-gradient(135deg, #2c3e50 0%, #34495e 100%)';
                document.querySelector('.theme-toggle').textContent = '日间模式';
                document.querySelector('.title').style.color = '#ecf0f1';
                document.querySelector('.title').style.background = 'rgba(44, 62, 80, 0.7)';
                document.querySelector('.info-panel').style.background = 'rgba(44, 62, 80, 0.7)';
                document.querySelector('.info-panel').style.color = '#ecf0f1';
                document.querySelectorAll('.control-btn').forEach(btn => {
                    btn.style.background = 'rgba(44, 62, 80, 0.7)';
                    btn.style.color = '#ecf0f1';
                });
                document.querySelector('.theme-toggle').style.background = 'rgba(44, 62, 80, 0.7)';
                document.querySelector('.theme-toggle').style.color = '#ecf0f1';
                document.querySelector('.settings-panel').style.background = 'rgba(44, 62, 80, 0.8)';
                document.querySelector('.settings-panel').style.color = '#ecf0f1';
            } else {
                document.body.style.background = 'linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)';
                document.querySelector('.theme-toggle').textContent = '夜间模式';
                document.querySelector('.title').style.color = '#4a5568';
                document.querySelector('.title').style.background = 'rgba(255, 255, 255, 0.7)';
                document.querySelector('.info-panel').style.background = 'rgba(255, 255, 255, 0.8)';
                document.querySelector('.info-panel').style.color = '#4a5568';
                document.querySelectorAll('.control-btn').forEach(btn => {
                    btn.style.background = 'rgba(255, 255, 255, 0.8)';
                    btn.style.color = '#4a5568';
                });
                document.querySelector('.theme-toggle').style.background = 'rgba(255, 255, 255, 0.8)';
                document.querySelector('.theme-toggle').style.color = '#4a5568';
                document.querySelector('.settings-panel').style.background = 'rgba(255, 255, 255, 0.8)';
                document.querySelector('.settings-panel').style.color = '#4a5568';
            }
        }

        // 创建粒子效果
        function createParticles() {
            if (!settings.enableParticles) return;
            
            const particleCount = 30;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                const size = getRandom(2, 6);
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                
                const x = getRandom(0, 100);
                const y = getRandom(0, 100);
                particle.style.left = `${x}%`;
                particle.style.top = `${y}%`;
                
                const colorIndex = Math.floor(Math.random() * colors.length);
                particle.style.backgroundColor = colors[colorIndex].replace('0.85', '0.3');
                
                document.body.appendChild(particle);
                
                particles.push({
                    element: particle,
                    x: x,
                    y: y,
                    speedX: getRandom(-0.5, 0.5),
                    speedY: getRandom(-0.5, 0.5)
                });
            }
            
            // 更新粒子位置
            particleInterval = setInterval(() => {
                if (!settings.enableParticles) {
                    clearInterval(particleInterval);
                    return;
                }
                
                particles.forEach(particle => {
                    particle.x += particle.speedX;
                    particle.y += particle.speedY;
                    
                    // 边界检查
                    if (particle.x < 0 || particle.x > 100) particle.speedX *= -1;
                    if (particle.y < 0 || particle.y > 100) particle.speedY *= -1;
                    
                    particle.element.style.left = `${particle.x}%`;
                    particle.element.style.top = `${particle.y}%`;
                });
            }, 50);
        }

        // 清除粒子效果
        function clearParticles() {
            particles.forEach(particle => {
                if (particle.element.parentNode) {
                    particle.element.parentNode.removeChild(particle.element);
                }
            });
            particles = [];
            clearInterval(particleInterval);
        }

        // 初始化标签
        function initStickers(count) {
            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    createSticker();
                }, i * 300);
            }
        }

        // 清除所有标签
        function clearAllStickers() {
            const stickers = document.querySelectorAll('.sticker');
            stickers.forEach(sticker => {
                sticker.style.transition = 'all 0.5s ease';
                sticker.style.transform = 'scale(0)';
                sticker.style.opacity = '0';
                setTimeout(() => {
                    if (sticker.parentNode) {
                        sticker.parentNode.removeChild(sticker);
                    }
                }, 500);
            });
            
            stickerPositions.length = 0;
            stickerCount = 0;
            document.getElementById('count').textContent = stickerCount;
        }

        // 更新设置显示
        function updateSettingsDisplay() {
            document.getElementById('countValue').textContent = settings.stickerCount;
            
            let speedText;
            switch(settings.animationSpeed) {
                case 1: speedText = '很慢'; break;
                case 2: speedText = '较慢'; break;
                case 3: speedText = '正常'; break;
                case 4: speedText = '较快'; break;
                case 5: speedText = '很快'; break;
                default: speedText = '正常';
            }
            document.getElementById('speedValue').textContent = speedText;
            
            let sizeText;
            switch(settings.fontSize) {
                case 1: sizeText = '很小'; break;
                case 2: sizeText = '较小'; break;
                case 3: sizeText = '中等'; break;
                case 4: sizeText = '较大'; break;
                case 5: sizeText = '很大'; break;
                default: sizeText = '中等';
            }
            document.getElementById('sizeValue').textContent = sizeText;
            
            document.getElementById('enableParticles').checked = settings.enableParticles;
            document.getElementById('enableHearts').checked = settings.enableHearts;
        }

        // 事件监听
        document.getElementById('addBtn').addEventListener('click', function() {
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    createSticker();
                }, i * 200);
            }
        });

        document.getElementById('clearBtn').addEventListener('click', clearAllStickers);
        
        document.getElementById('settingsBtn').addEventListener('click', function() {
            const panel = document.getElementById('settingsPanel');
            panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
        });
        
        document.querySelector('.theme-toggle').addEventListener('click', toggleTheme);
        
        // 设置变化监听
        document.getElementById('stickerCount').addEventListener('input', function() {
            settings.stickerCount = parseInt(this.value);
            updateSettingsDisplay();
        });
        
        document.getElementById('animationSpeed').addEventListener('input', function() {
            settings.animationSpeed = parseInt(this.value);
            updateSettingsDisplay();
        });
        
        document.getElementById('fontSize').addEventListener('input', function() {
            settings.fontSize = parseInt(this.value);
            updateSettingsDisplay();
        });
        
        document.getElementById('enableParticles').addEventListener('change', function() {
            settings.enableParticles = this.checked;
            if (settings.enableParticles) {
                createParticles();
            } else {
                clearParticles();
            }
        });
        
        document.getElementById('enableHearts').addEventListener('change', function() {
            settings.enableHearts = this.checked;
        });

        // 双击创建标签
        document.addEventListener('dblclick', function(e) {
            createSticker();
        });

        // 页面可见性变化
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = "你不想理我了吗(╥﹏╥)";
            } else {
                document.title = "灰原什么的最可爱了(●'◡'●)";
            }
        });

        // 页面加载时初始化
        window.addEventListener('load', function() {
            // 初始化设置显示
            updateSettingsDisplay();
            
            // 初始创建标签
            initStickers(settings.stickerCount);
            
            // 创建粒子效果
            createParticles();
            
            // 每隔一段时间创建一个新标签
            setInterval(() => {
                if (stickerCount < settings.stickerCount) {
                    createSticker();
                }
            }, 3000);
        });
    </script>
</body>
</html>
